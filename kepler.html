<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css"/>
	<script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css2?family=Bruno+Ace&display=swap" rel="stylesheet">
	<title>Space Science Website</title>
</head>

	<py-script>

	import asyncio
	import micropip

	# Run this using "asyncio"
	async def main():
	
		await micropip.install(["matplotlib", "numpy"])

	asyncio.create_task(main())
	
	import numpy as np
	
	arr=np.arange(4)
	
	print(arr)
	
	</py-script>
	<py-config>

		packages = ["matplotlib", "pandas", "numpy"]

	</py-config>

<body>

	<py-script>

		import numpy as np
		import matplotlib
		import matplotlib.pyplot as plt
		plt.rcParams['animation.html'] = 'jshtml'
		from matplotlib.animation import FuncAnimation
		from matplotlib.animation import PillowWriter
	
		# Define constants
		G = 4*np.pi**2    # Gravitational constant in AU^3/yr^2
	
		# Define host star properties
		M_star = 1.0   # Solar mass
		R_star = 1.0   # Solar radius
	
		# Define planet properties
		M_planet = 0.01    # Earth mass
		R_planet = 0.01    # Earth radius
		a_planet = 1.0     # Semi-major axis of planet's orbit in AU
		period = 1.0       # Orbital period of planet in years
	
		# Define time step and number of steps
		dt = 0.01          # Time step in years
		num_steps = 200   # Number of time steps
	
		# Define initial position and velocity of planet
		x = np.array([a_planet, 0.0])
		v = np.array([0.0, np.sqrt(G * M_star / a_planet)])
	
		# Define function to calculate gravitational force and update position and velocity
		def update_planet(x, v, dt):
			r = np.sqrt(x[0]**2 + x[1]**2)
			F_grav = -G * M_planet * M_star * x / r**3
			v += F_grav * dt / M_planet
			x += v * dt
			return x, v
	
		# Define array to store positions of planet at each time step
		x_traj = np.zeros((num_steps, 2))
		x_traj[0] = x
	
		# Set background to black without gridlines
		plt.style.use('dark_background')
	
		# Define function to animate plot
		def animate(i):
	
			global x, v, x_traj
			
			if i == 0 or len(x_traj[:i, :]) == 0:
				max_val = 1.0
			else:
				max_val = a_planet*1.1
	
			# Update position and velocity of planet
			x, v = update_planet(x, v, dt)
	
			# Add current position to trajectory
			x_traj[i] = x
	
			# Clear previous plot and plot current position and trajectory
			plt.clf()
			plt.xlim(-max_val, max_val)
			plt.ylim(-max_val, max_val)
			plt.plot(0, 0, 'o', color='orange', markersize=10*M_star)
			plt.plot(x[0], x[1], 'o', color='blue', markersize=10*M_planet)
			plt.plot(x_traj[:i, 0], x_traj[:i, 1], '-', color='gray')
	
			# Set title and axis labels
			plt.title('Planet Orbit')
			plt.xlabel('x (AU)')
			plt.ylabel('y (AU)')
	
	
		# Create animation
		ani = FuncAnimation(plt.gcf(), animate, frames=num_steps, interval=10)
	
		# Save animation as GIF file
		ani.save('orbit.gif', writer=PillowWriter(fps=10))
	
		# Show final plot
		plt.show()
	
	</py-script>

	<div class="title-banner">
		<h1 class="title">Space Science</h1>
        <img src="atom.png" alt="Title image" class="image-title" height="100px" width="100px">
	</div>

	<div class="selection-banner">
		<a href="home.html" class="selection">Home</a>
		<a href="newtons.html" class="selection">Newton's Laws</a>
		<a href="kepler.html" class="selection">Kepler's Laws</a>
        <a href="attributions.html" class="selection">Attributions</a>
		<a href="info.html" class="selection">Info</a>
	</div>


	<div class="content-box">

	</div>


	<script src="script.js"></script>
	<div id="quizBoxNewton" class="content-box">
	</div>

	<script>
		// Call the function to display the quiz in the div
		displayQuiz("quizboxNewton");
	</script>


<footer class="footer">
    <p>2023 Benjamin Dadswell, The University of Kent</p>
</footer>
<py-script defer>
	js.console.log("PyScript code has been loaded.");
  </py-script>
</body>
</html>
